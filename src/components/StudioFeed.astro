---
// file: src/components/StudioFeed.astro
import { Image } from 'astro:assets';
import { fromStudio, toStudioFeed } from '../lib/collections';

const { studioFeed } = Astro.props;
const feed = toStudioFeed(await fromStudio());
---
{
	feed.length && (
		<article class="studio-feed dot-shadow panel bg-tertiary-light">
			<div class="wrapper flow flow-space-300">
				{/* prettier-ignore */}
				<h2 class="studio-feed__heading headline md:measure-micro" data-highlight="secondary">{studioFeed.title}</h2>
				<p class="visually-hidden" id="studio-feed-desc">
					A collection of images from around our studio and the people who work
					here.
				</p>
				<div class="studio-feed__items flow-space-700">
					<ul class="studio-feed__list">
						{feed.map(({ src, alt, width, quality }) => (
							<li>
								<Image
									src={src}
									alt={alt}
									width={width}
									quality={quality}
									draggable="false"
									class="radius"
								/>
							</li>
						))}
					</ul>
				</div>
			</div>
		</article>
	)
}
