# Lesson 12

“For each desired change, make the change easy (warning: this may be hard), then make the easy change”  
[[Kent Beck](https://twitter.com/KentBeck/status/250733358307500032)]

Right now the `PageHeader` component accepts the summary as a `string` containing the HTML from the markdown page content. Moving forward it is more useful if it would accept an Astro component to render the page summary.

Refactor `PageHeader`, `Feed`, and `/blog` to use [slots](https://docs.astro.build/en/core-concepts/astro-components/#slots).

Supply the `summary` as slotted content to the `PageHeader` component.

```Astro
---
// file: src/components/PageHeader.astro

interface Props {
  title: string;
}

const { title } = Astro.props;
---

<div class="page-header bg-light-glare">
  <div class="wrapper flow">
    <h1 class="page-header__heading headline" data-highlight="primary">
      {title}
    </h1>
    {Astro.slots.has('default') && (
      <div class="page-header__summary measure-long">
        <slot />
      </div>
    )}
  </div>
</div>
```

- The optional `summary` prop is removed.
- [`Astro.slots.has('default')`](https://docs.astro.build/en/reference/api-reference/#astroslotshas) is used to detect whether (`default`, i.e. unnamed) slot content has been supplied by the host component. This makes it possible to only use the slot wrapper when slotted content is provided.

Have the `Feed` layout optionally accept the summary as a [named slot](https://docs.astro.build/en/core-concepts/astro-components/#named-slots).

```Astro
---
// file: src/layouts/Feed.astro
import type { CollectionEntry } from 'astro:content';
import type { PaginationParams } from '../types';
import Base from './Base.astro';
import PageHeader from '../components/PageHeader.astro';
import PostList from '../components/PostList.astro';
import Pagination from '../components/Pagination.astro';

interface Props {
  title: string;
  tag?: string;
  posts: CollectionEntry<'posts'>[];
  pagination?: PaginationParams;
}

const { title, tag, posts, pagination } = Astro.props;
const headerTitle = tag ? `Blog posts filed under “${tag}”` : title;
---

<Base title={title}>
  <article>
    <PageHeader title={headerTitle}>
      <slot name="feed-summary" />
    </PageHeader>
    <PostList posts={posts} />
    {pagination && <Pagination params={pagination} />}
  </article>
</Base>
```

- The optional `summary` prop is removed.
- A named slot `feed-summary` makes more sense than using the `default` slot as the summary isn't the default content for the `Feed` layout; that is provided by the `PostList` component from the `posts` props.

Supply the markdown content via the standard [`Content` component](https://docs.astro.build/en/guides/markdown-content/#the-content-component).

```Astro
---
// file: src/pages/blog/[...page].astro
import type { GetStaticPathsOptions } from 'astro';
import { fromPosts } from '../../lib/collections';
import { Content as Summary, frontmatter } from '../../data/blog.md';
import Feed from '../../layouts/Feed.astro';

export async function getStaticPaths(options: GetStaticPathsOptions) {
  const { pageSize } = frontmatter;

  const posts = await fromPosts();
  return options.paginate(posts, { pageSize });
}

const { anchor, nextLabel, previousLabel, title } = frontmatter;
const { page } = Astro.props;
const pagination = {
  anchor,
  nextHref: page.url.next,
  nextLabel,
  previousHref: page.url.prev,
  previousLabel,
};
---

<Feed title={title} posts={page.data} pagination={pagination}>
  <Summary slot="feed-summary" />
</Feed>
```

- `Content` is renamed to `Summary` to reflect its role and is supplied via the `feed-summary` slot to the `Feed` layout.

---
